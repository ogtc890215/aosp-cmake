set(LOCAL_PATH ${KERNEL_ROOT}/drivers/base/regmap)

set(SOURCE_FILES "")

if (${CONFIG_REGMAP})
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regmap)
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regcache)
endif()
if (${CONFIG_REGMAP})
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regcache-rbtree)
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regcache-lzo)
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regcache-flat)
endif()
if (${CONFIG_DEBUG_FS})
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regmap-debugfs)
endif()
if (${CONFIG_REGMAP_I2C})
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regmap-i2c)
endif()
if (${CONFIG_REGMAP_SPI})
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regmap-spi)
endif()
if (${CONFIG_REGMAP_MMIO})
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regmap-mmio)
endif()
if (${CONFIG_REGMAP_IRQ})
 add_c_source(SOURCE_FILES ${LOCAL_PATH} regmap-irq)
endif()

add_library(drivers-base-regmap STATIC ${SOURCE_FILES})
target_include_directories(drivers-base-regmap PRIVATE ${LOCAL_PATH})