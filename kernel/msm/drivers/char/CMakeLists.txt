set(LOCAL_PATH ${KERNEL_ROOT}/drivers/char)

set(SOURCE_FILES "")

add_c_source(SOURCE_FILES ${LOCAL_PATH} mem)
add_c_source(SOURCE_FILES ${LOCAL_PATH} random)
if (${CONFIG_TTY_PRINTK})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} ttyprintk)
endif ()
add_c_source(SOURCE_FILES ${LOCAL_PATH} misc)
if (${CONFIG_ATARI_DSP56K})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} dsp56k)
endif ()
if (${CONFIG_VIRTIO_CONSOLE})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} virtio_console)
endif ()
if (${CONFIG_RAW_DRIVER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} raw)
endif ()

if (${CONFIG_SGI_SNSC})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} snsc)
    add_c_source(SOURCE_FILES ${LOCAL_PATH} snsc_event)
endif ()
if (${CONFIG_MSPEC})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} mspec)
endif ()
if (${CONFIG_MMTIMER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} mmtimer)
endif ()
if (${CONFIG_UV_MMTIMER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} uv_mmtimer)
endif ()
if (${CONFIG_VIOTAPE})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} viotape)
endif ()
if (${CONFIG_IBM_BSR})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} bsr)
endif ()
if (${CONFIG_SGI_MBCS})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} mbcs)
endif ()
if (${CONFIG_BFIN_OTP})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} bfin-otp)
endif ()

if (${CONFIG_PRINTER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} lp)
endif ()

if (${CONFIG_APM_EMULATION})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} apm-emulation)
endif ()

if (${CONFIG_DTLK})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} dtlk)
endif ()
if (${CONFIG_APPLICOM})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} applicom)
endif ()
if (${CONFIG_SONYPI})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} sonypi)
endif ()
if (${CONFIG_RTC})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} rtc)
endif ()
if (${CONFIG_HPET})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} hpet)
endif ()
if (${CONFIG_GEN_RTC})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} genrtc)
endif ()
if (${CONFIG_EFI_RTC})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} efirtc)
endif ()
if (${CONFIG_DS1302})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} ds1302)
endif ()
if (${CONFIG_GENERIC_NVRAM})
    if (${CONFIG_NVRAM})
        add_c_source(SOURCE_FILES ${LOCAL_PATH} generic_nvram)
    endif ()
else ()
    if (${CONFIG_NVRAM})
        add_c_source(SOURCE_FILES ${LOCAL_PATH} nvram)
    endif ()
endif ()
if (${CONFIG_TOSHIBA})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} toshiba)
endif ()
if (${CONFIG_I8K})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} i8k)
endif ()
if (${CONFIG_DS1620})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} ds1620)
endif ()

if (${CONFIG_PPDEV})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} ppdev)
endif ()
if (${CONFIG_NWBUTTON})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} nwbutton)
endif ()
if (${CONFIG_NWFLASH})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} nwflash)
endif ()
if (${CONFIG_SCx200_GPIO})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} scx200_gpio)
endif ()
if (${CONFIG_PC8736x_GPIO})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} pc8736x_gpio)
endif ()
if (${CONFIG_NSC_GPIO})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} nsc_gpio)
endif ()
if (${CONFIG_GPIO_TB0219})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} tb0219)
endif ()
if (${CONFIG_TELCLOCK})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} tlclk)
endif ()

if (${CONFIG_HANGCHECK_TIMER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} hangcheck-timer)
endif ()

if (${CONFIG_PS3_FLASH})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} ps3flash)
endif ()

if (${CONFIG_JS_RTC})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} rtc)
endif ()

if (${CONFIG_TILE_SROM})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} tile-srom)
endif ()

if (${CONFIG_MSM_ADSPRPC})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} adsprpc)
endif ()
if (${CONFIG_COMPAT})
    if (${CONFIG_MSM_ADSPRPC})
        add_c_source(SOURCE_FILES ${LOCAL_PATH} adsprpc_compat)
    endif ()
endif ()
if (${CONFIG_MSM_RDBG})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} rdbg)
endif ()
if (${CONFIG_MSM_SMD_PKT})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} msm_smd_pkt)
endif ()

add_library(drivers-char STATIC ${SOURCE_FILES})