set(LOCAL_PATH ${KERNEL_ROOT}/drivers/of)

set(SOURCE_FILES "")

add_c_source(SOURCE_FILES ${LOCAL_PATH} base)
if (${CONFIG_OF_FLATTREE})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} fdt)
    set_property(SOURCE ${LOCAL_PATH}/fdt.c PROPERTY
            INCLUDE_DIRECTORIES ${LOCAL_PATH}/../../scripts/dtc/libfdt
            )
endif ()
if (${CONFIG_OF_PROMTREE})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} pdt)
endif ()
if (${CONFIG_OF_ADDRESS})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} address)
endif ()
if (${CONFIG_OF_IRQ})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} irq)
endif ()
if (${CONFIG_OF_DEVICE})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} device)
    add_c_source(SOURCE_FILES ${LOCAL_PATH} platform)
endif ()
if (${CONFIG_OF_I2C})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_i2c)
endif ()
if (${CONFIG_OF_NET})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_net)
endif ()
if (${CONFIG_OF_SELFTEST})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} selftest)
endif ()
if (${CONFIG_OF_MDIO})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_mdio)
endif ()
if (${CONFIG_OF_PCI})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_pci)
endif ()
if (${CONFIG_OF_PCI_IRQ})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_pci_irq)
endif ()
if (${CONFIG_OF_SPMI})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_spmi)
endif ()
if (${CONFIG_OF_MTD})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_mtd)
endif ()
if (${CONFIG_OF_SLIMBUS})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_slimbus)
endif ()
if (${CONFIG_OF_CORESIGHT})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_coresight)
endif ()
if (${CONFIG_OF_BATTERYDATA})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_batterydata)
endif ()
if (${CONFIG_OF_RESERVED_MEM})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} of_reserved_mem)
endif ()

add_library(drivers-of STATIC ${SOURCE_FILES})
target_include_directories(drivers-of PRIVATE ${LOCAL_PATH})