set(LOCAL_PATH ${KERNEL_ROOT}/kernel/trace)

set(SOURCE_FILES "")

if (${CONFIG_TRACE_CLOCK})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_clock)
endif ()

if (${CONFIG_FUNCTION_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} libftrace)
endif ()
if (${CONFIG_RING_BUFFER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} ring_buffer)
endif ()
if (${CONFIG_RING_BUFFER_BENCHMARK})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} ring_buffer_benchmark)
endif ()

if (${CONFIG_TRACING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace)
endif ()
if (${CONFIG_TRACING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_output)
endif ()
if (${CONFIG_TRACING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_stat)
endif ()
if (${CONFIG_TRACING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_printk)
endif ()
if (${CONFIG_CONTEXT_SWITCH_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_sched_switch)
endif ()
if (${CONFIG_FUNCTION_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_functions)
endif ()
if (${CONFIG_IRQSOFF_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_irqsoff)
endif ()
if (${CONFIG_PREEMPT_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_irqsoff)
endif ()
if (${CONFIG_SCHED_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_sched_wakeup)
endif ()
if (${CONFIG_CPU_FREQ_SWITCH_PROFILER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_cpu_freq_switch)
endif ()
if (${CONFIG_NOP_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_nop)
endif ()
if (${CONFIG_STACK_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_stack)
endif ()
if (${CONFIG_MMIOTRACE})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_mmiotrace)
endif ()
if (${CONFIG_FUNCTION_GRAPH_TRACER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_functions_graph)
endif ()
if (${CONFIG_TRACE_BRANCH_PROFILING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_branch)
endif ()
if (${CONFIG_BLK_DEV_IO_TRACE})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} blktrace)
endif ()
if (${CONFIG_BLOCK})
    if (${CONFIG_EVENT_TRACING})
        add_c_source(SOURCE_FILES ${LOCAL_PATH} blktrace)
    endif ()
endif ()
if (${CONFIG_EVENT_TRACING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_events)
endif ()
if (${CONFIG_EVENT_TRACING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_export)
endif ()
if (${CONFIG_FTRACE_SYSCALLS})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_syscalls)
endif ()
if (${CONFIG_PERF_EVENTS})
    if (${CONFIG_EVENT_TRACING})
        add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_event_perf)
    endif ()
endif ()
if (${CONFIG_EVENT_TRACING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_events_filter)
endif ()
if (${CONFIG_KPROBE_EVENT})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_kprobe)
endif ()
if (${CONFIG_TRACEPOINTS})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} power-traces)
endif ()
if (${CONFIG_PM_RUNTIME})
    if (${CONFIG_TRACEPOINTS})
        add_c_source(SOURCE_FILES ${LOCAL_PATH} rpm-traces)
    endif ()
endif ()
if (${CONFIG_TRACING})
    if (${CONFIG_KGDB_KDB})
        add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_kdb)
    endif ()
endif ()
if (${CONFIG_PROBE_EVENTS})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_probe)
endif ()
if (${CONFIG_UPROBE_EVENT})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} trace_uprobe)
endif ()
if (${CONFIG_GPU_TRACEPOINTS})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} gpu-traces)
endif ()
if (${CONFIG_MSM_RTB})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} msm_rtb)
endif ()
if (${CONFIG_IPC_LOGGING})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} ipc_logging)
endif ()
if (${CONFIG_DEBUG_FS})
    if (${CONFIG_IPC_LOGGING})
        add_c_source(SOURCE_FILES ${LOCAL_PATH} ipc_logging_debug)
    endif ()
endif ()

add_library(kernel-trace STATIC ${SOURCE_FILES})

