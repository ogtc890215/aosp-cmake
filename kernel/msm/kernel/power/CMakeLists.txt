set(LOCAL_PATH ${KERNEL_ROOT}/kernel/power)

set(SOURCE_FILES "")

if (${CONFIG_PM_DEBUG})
    add_definitions(DEBUG)
endif ()

add_c_source(SOURCE_FILES ${LOCAL_PATH} qos)

if (${CONFIG_PM})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} main)
endif ()
if (${CONFIG_VT_CONSOLE_SLEEP})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} console)
endif ()
if (${CONFIG_FREEZER})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} process)
endif ()
if (${CONFIG_SUSPEND})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} suspend)
endif ()
if (${CONFIG_PM_TEST_SUSPEND})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} suspend_test)
endif ()
if (${CONFIG_HIBERNATION})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} hibernate)
    add_c_source(SOURCE_FILES ${LOCAL_PATH} snapshot)
    add_c_source(SOURCE_FILES ${LOCAL_PATH} swap)
    add_c_source(SOURCE_FILES ${LOCAL_PATH} user)
    add_c_source(SOURCE_FILES ${LOCAL_PATH} block_io)
endif ()
if (${CONFIG_PM_AUTOSLEEP})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} autosleep)
endif ()
if (${CONFIG_PM_WAKELOCKS})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} wakelock)
endif ()
if (${CONFIG_SUSPEND_TIME})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} suspend_time)
endif ()
if (${CONFIG_MAGIC_SYSRQ})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} poweroff)
endif ()
if (${CONFIG_SUSPEND})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} wakeup_reason)
endif ()
if (${CONFIG_PARTIALRESUME})
    add_c_source(SOURCE_FILES ${LOCAL_PATH} partialresume)
endif ()

add_library(kernel-power STATIC ${SOURCE_FILES})